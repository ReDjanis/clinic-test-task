"use strict";const burgerBtn=document.querySelector("#check-menu"),burgerLabel=document.querySelector(".burger__label"),burgerMenu=document.querySelector(".burger__content"),burgerMenuItem=document.querySelectorAll(".burger__item");burgerLabel.addEventListener("click",(()=>{burgerBtn.checked?(burgerMenu.classList.add("burger__content-close"),document.body.classList.remove("scroll-lock")):(burgerMenu.classList.remove("burger__content-close"),document.body.classList.add("scroll-lock"))})),burgerMenuItem.forEach((e=>{e.addEventListener("click",(()=>{burgerMenu.classList.add("burger__content-close"),document.body.classList.remove("scroll-lock"),burgerBtn.checked=!1}))}));let buttons=document.querySelectorAll("[data-request]");const form=document.form,buttonSubmit=document.querySelector(".form__submit-btn");let arrElementsForm=Array.from(form.elements).filter((e=>!!e.name));const modalForm=document.querySelector(".modal-form"),modalAlertForm=document.querySelector(".modal-form__alert"),modalWrpForm=document.querySelector(".form"),modalCloseForm=document.querySelector(".form__btn"),modalWindowMessage=document.querySelector(".modal-message"),modalBtnMessage=document.querySelector(".modal-message__btn"),loader=document.querySelector(".loader");async function formSend(e){e.preventDefault();let t=!0;arrElementsForm.forEach((e=>{const r=document.querySelector(`[data-group=${e.name}]`);switch(e.name){case"nameUser":""===e.value.trim()?(paintRed(r,e),t=t&&!1):validateName(e.value.trim())?(paintByDefault(r,e),r.textContent="обязательно для заполнения",t=t&&!0):(paintRed(r,e),r.textContent="имя введено некорректно",t=t&&!1);break;case"email":""===e.value.trim()?(paintRed(r,e),t=t&&!1):validateEmail(e.value)?(paintByDefault(r,e),r.textContent="обязательно для заполнения",t=t&&!0):(paintRed(r,e),r.textContent="email введен некорректно",t=t&&!1);break;case"textMessage":""===e.value.trim()?(paintRed(r,e),t=t&&!1):validateName(e.value.trim())?(paintByDefault(r,e),r.textContent="обязательно для заполнения",t=t&&!0):(paintRed(r,e),r.textContent="сообщение введено некорректно",t=t&&!1)}}));const r=serializeForm(form);if(t){loader.style.display="block";const e=await sendData({name:r.get("nameUser"),email:r.get("email"),message:r.get("textMessage")});e.ok?(alert("Данные отправлены"),loader.style.display="none",modalWindowMessage.style.display="flex",modalWindowMessage.showModal()):(loader.style.display="none",alert("Код ошибки: "+e.status))}}function serializeForm(e){return new FormData(e)}async function sendData(e){return await fetch("sendmail.php",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json; charset=UTF-8"}})}function showButtonToClose(e,t){window.innerWidth>991&&(e.addEventListener("mouseenter",(()=>{t.style.display="none"})),e.addEventListener("mouseleave",(()=>{t.style.display="block"})))}function closeOnBackDropClickOrBtn({currentTarget:e,target:t}){(t===e||t===modalAlertForm)&&(document.body.classList.remove("scroll-lock"),cleaningInputs(arrElementsForm),modalForm.close(),arrElementsForm.forEach((e=>{const t=document.querySelector(`[data-group=${e.name}]`);paintByDefault(t,e),t.textContent="обязательно для заполнения"})))}function cleaningInputs(e){e.forEach((e=>{e.value=""}))}function paintRed(e,t){e.style.color="red",t.style.border="3px solid red"}function paintByDefault(e,t){e.style.color="#364844",t.style.border="1.5px solid #0DBC91"}function validateName(e){return/[а-яА-ЯЁё]/.test(e)}function validateEmail(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}buttons.forEach((e=>{e.addEventListener("click",(()=>{document.body.classList.add("scroll-lock"),modalForm.showModal()}))})),modalForm.addEventListener("click",closeOnBackDropClickOrBtn),modalCloseForm.addEventListener("click",(()=>{modalForm.click()})),showButtonToClose(modalWrpForm,modalAlertForm),form.addEventListener("submit",formSend),modalBtnMessage.addEventListener("click",(()=>{cleaningInputs(arrElementsForm),modalWindowMessage.style.display="none",modalWindowMessage.close()}));const cards=document.querySelectorAll(".services__exam"),sliderLine=document.querySelector(".slider__line"),sliderTouch=document.querySelector(".slider__touch"),currentCard=document.querySelector("#currentCard"),totalCards=document.querySelector("#totalCards"),prevBtn=document.querySelector("#prevBtn"),nextBtn=document.querySelector("#nextBtn");let width,count=0;totalCards.textContent=cards.length;let start,change,total=+totalCards.textContent;function checkVarChange(){change>0?moveToNextSlide():moveToPrevSlide()}function showSlide(e,t){let r=document.querySelector(".slider").offsetWidth;return e.style.width=r*t.length+"px",t.forEach((e=>{e.style.width=r+"px",e.style.height="auto",e.style.minHeight="440px"})),rollSliderNext(e,count,r),r}function rollSliderPrev(e,t,r){let o;1===t?(o=total-1,e.style.transform="translate(-"+o*r+"px)"):(o=t-2,e.style.transform="translate(-"+o*r+"px)")}function rollSliderNext(e,t,r){e.style.transform=t===total?"translate(0px)":"translate(-"+t*r+"px)"}function moveToPrevSlide(){count=+currentCard.textContent,rollSliderPrev(sliderLine,count,width),currentCard.textContent=1===count?+totalCards.textContent:count-1}function moveToNextSlide(){count=+currentCard.textContent,rollSliderNext(sliderLine,count,width),currentCard.textContent=count===total?1:count+1}width=showSlide(sliderLine,cards),prevBtn.addEventListener("click",moveToPrevSlide),nextBtn.addEventListener("click",moveToNextSlide),window.addEventListener("resize",(()=>{width=showSlide(sliderLine,cards)})),sliderTouch.addEventListener("dragstart",(e=>{start=e.clientX})),sliderTouch.addEventListener("dragover",(e=>{e.preventDefault();let t=e.clientX;change=start-t})),sliderTouch.addEventListener("dragend",checkVarChange),sliderTouch.addEventListener("touchstart",(e=>{start=e.touches[0].clientX})),sliderTouch.addEventListener("touchmove",(e=>{e.preventDefault();let t=e.touches[0];change=start-t.clientX})),sliderTouch.addEventListener("touchend",checkVarChange);